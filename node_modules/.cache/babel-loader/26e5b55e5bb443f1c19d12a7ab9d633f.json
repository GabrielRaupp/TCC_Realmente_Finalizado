{"ast":null,"code":"var _jsxFileName = \"/home/aluno/Raupp/TCC_Realmente_Finalizado/src/components/pages/Horarios.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Container from '../layout/Container';\nimport Loading from '../layout/Loading';\nimport LinkButton from '../layout/LinkButton';\nimport HorarioCard from '../horario/HorarioCard';\nimport Message from '../layout/Message';\nimport styles from './Horarios.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Horarios() {\n  _s();\n  const [horarios, setHorarios] = useState([]);\n  const [removeLoading, setRemoveLoading] = useState(false);\n  const [horarioMessage, setHorarioMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://localhost:3000/horarios', {\n          credentials: 'same-origin'\n        });\n        if (!response.ok) {\n          throw new Error('Erro ao buscar horários');\n        }\n        const data = await response.json();\n        console.log('Horários recebidos:', data);\n        const sortedHorarios = data.sort((a, b) => new Date(a.horarios) - new Date(b.horarios));\n        setHorarios(sortedHorarios);\n      } catch (error) {\n        console.error(\"Erro ao buscar horários:\", error);\n        setErrorMessage('Falha ao carregar os horários. Tente novamente mais tarde.');\n      } finally {\n        setRemoveLoading(true);\n      }\n    };\n    fetchData();\n  }, []);\n  const removeHorario = async id => {\n    try {\n      const response = await fetch(`http://localhost:3000/horarios/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'same-origin'\n      });\n      if (!response.ok) {\n        throw new Error('Erro ao remover horário');\n      }\n      setHorarios(prevHorarios => prevHorarios.filter(horario => horario._id !== id));\n      setHorarioMessage('Horário removido com sucesso!');\n    } catch (error) {\n      console.error(\"Erro ao remover horário:\", error);\n      setErrorMessage('Falha ao remover o horário. Tente novamente.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.title_container,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Meus Hor\\xE1rios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LinkButton, {\n        to: \"/newhorario\",\n        text: \"Montar hor\\xE1rio\",\n        customClass: styles.addHorarioButton\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), horarioMessage && /*#__PURE__*/_jsxDEV(Message, {\n      type: \"success\",\n      msg: horarioMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 26\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(Message, {\n      type: \"error\",\n      msg: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      customClass: styles.container,\n      children: horarios.length > 0 ? horarios.map(horario => /*#__PURE__*/_jsxDEV(HorarioCard, {\n        id: horario._id,\n        name: horario.name,\n        horario: horario.horarios,\n        category: horario.category || 'Sem categoria',\n        handleRemove: removeHorario\n      }, horario._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this)) : !removeLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"N\\xE3o h\\xE1 hor\\xE1rios cadastrados!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Horarios, \"L030Z/ZOfrYKzbozcSopWlS2RRQ=\");\n_c = Horarios;\nexport default Horarios;\nvar _c;\n$RefreshReg$(_c, \"Horarios\");","map":{"version":3,"names":["useState","useEffect","Container","Loading","LinkButton","HorarioCard","Message","styles","jsxDEV","_jsxDEV","Horarios","_s","horarios","setHorarios","removeLoading","setRemoveLoading","horarioMessage","setHorarioMessage","errorMessage","setErrorMessage","fetchData","response","fetch","credentials","ok","Error","data","json","console","log","sortedHorarios","sort","a","b","Date","error","removeHorario","id","method","headers","prevHorarios","filter","horario","_id","className","container","children","title_container","fileName","_jsxFileName","lineNumber","columnNumber","to","text","customClass","addHorarioButton","type","msg","length","map","name","category","handleRemove","_c","$RefreshReg$"],"sources":["/home/aluno/Raupp/TCC_Realmente_Finalizado/src/components/pages/Horarios.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Container from '../layout/Container';\nimport Loading from '../layout/Loading';\nimport LinkButton from '../layout/LinkButton';\nimport HorarioCard from '../horario/HorarioCard';\nimport Message from '../layout/Message';\nimport styles from './Horarios.module.css';\n\nfunction Horarios() {\n  const [horarios, setHorarios] = useState([]);\n  const [removeLoading, setRemoveLoading] = useState(false);\n  const [horarioMessage, setHorarioMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://localhost:3000/horarios', {\n          credentials: 'same-origin',\n        });\n\n        if (!response.ok) {\n          throw new Error('Erro ao buscar horários');\n        }\n\n        const data = await response.json();\n        console.log('Horários recebidos:', data);\n\n        const sortedHorarios = data.sort((a, b) => new Date(a.horarios) - new Date(b.horarios));\n        setHorarios(sortedHorarios);\n      } catch (error) {\n        console.error(\"Erro ao buscar horários:\", error);\n        setErrorMessage('Falha ao carregar os horários. Tente novamente mais tarde.');\n      } finally {\n        setRemoveLoading(true);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const removeHorario = async (id) => {\n    try {\n      const response = await fetch(`http://localhost:3000/horarios/${id}`, {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'same-origin',\n      });\n\n      if (!response.ok) {\n        throw new Error('Erro ao remover horário');\n      }\n\n      setHorarios((prevHorarios) => prevHorarios.filter((horario) => horario._id !== id));\n      setHorarioMessage('Horário removido com sucesso!');\n    } catch (error) {\n      console.error(\"Erro ao remover horário:\", error);\n      setErrorMessage('Falha ao remover o horário. Tente novamente.');\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.title_container}>\n        <h1>Meus Horários</h1>\n        <LinkButton to=\"/newhorario\" text=\"Montar horário\" customClass={styles.addHorarioButton} />\n      </div>\n      {horarioMessage && <Message type=\"success\" msg={horarioMessage} />}\n      {errorMessage && <Message type=\"error\" msg={errorMessage} />}\n      <Container customClass={styles.container}>\n        {horarios.length > 0 ? (\n          horarios.map((horario) => (\n            <HorarioCard\n              id={horario._id}\n              name={horario.name}\n              horario={horario.horarios}\n              category={horario.category || 'Sem categoria'}\n              key={horario._id}\n              handleRemove={removeHorario}\n            />\n          ))\n        ) : (\n          !removeLoading ? <Loading /> : <p>Não há horários cadastrados!</p>\n        )}\n      </Container>\n    </div>\n  );\n}\n\nexport default Horarios;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,qBAAqB;AAC3C,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAOC,UAAU,MAAM,sBAAsB;AAC7C,OAAOC,WAAW,MAAM,wBAAwB;AAChD,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAOC,MAAM,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACc,aAAa,EAAEC,gBAAgB,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACkB,YAAY,EAAEC,eAAe,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,MAAMmB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gCAAgC,EAAE;UAC7DC,WAAW,EAAE;QACf,CAAC,CAAC;QAEF,IAAI,CAACF,QAAQ,CAACG,EAAE,EAAE;UAChB,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;QAC5C;QAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;QAClCC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEH,IAAI,CAAC;QAExC,MAAMI,cAAc,GAAGJ,IAAI,CAACK,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAACpB,QAAQ,CAAC,GAAG,IAAIsB,IAAI,CAACD,CAAC,CAACrB,QAAQ,CAAC,CAAC;QACvFC,WAAW,CAACiB,cAAc,CAAC;MAC7B,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdP,OAAO,CAACO,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDhB,eAAe,CAAC,4DAA4D,CAAC;MAC/E,CAAC,SAAS;QACRJ,gBAAgB,CAAC,IAAI,CAAC;MACxB;IACF,CAAC;IAEDK,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMgB,aAAa,GAAG,MAAOC,EAAE,IAAK;IAClC,IAAI;MACF,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAkCe,EAAE,EAAE,EAAE;QACnEC,MAAM,EAAE,QAAQ;QAChBC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/ChB,WAAW,EAAE;MACf,CAAC,CAAC;MAEF,IAAI,CAACF,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;MAC5C;MAEAZ,WAAW,CAAE2B,YAAY,IAAKA,YAAY,CAACC,MAAM,CAAEC,OAAO,IAAKA,OAAO,CAACC,GAAG,KAAKN,EAAE,CAAC,CAAC;MACnFpB,iBAAiB,CAAC,+BAA+B,CAAC;IACpD,CAAC,CAAC,OAAOkB,KAAK,EAAE;MACdP,OAAO,CAACO,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDhB,eAAe,CAAC,8CAA8C,CAAC;IACjE;EACF,CAAC;EAED,oBACEV,OAAA;IAAKmC,SAAS,EAAErC,MAAM,CAACsC,SAAU;IAAAC,QAAA,gBAC/BrC,OAAA;MAAKmC,SAAS,EAAErC,MAAM,CAACwC,eAAgB;MAAAD,QAAA,gBACrCrC,OAAA;QAAAqC,QAAA,EAAI;MAAa;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtB1C,OAAA,CAACL,UAAU;QAACgD,EAAE,EAAC,aAAa;QAACC,IAAI,EAAC,mBAAgB;QAACC,WAAW,EAAE/C,MAAM,CAACgD;MAAiB;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxF,CAAC,EACLnC,cAAc,iBAAIP,OAAA,CAACH,OAAO;MAACkD,IAAI,EAAC,SAAS;MAACC,GAAG,EAAEzC;IAAe;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACjEjC,YAAY,iBAAIT,OAAA,CAACH,OAAO;MAACkD,IAAI,EAAC,OAAO;MAACC,GAAG,EAAEvC;IAAa;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC5D1C,OAAA,CAACP,SAAS;MAACoD,WAAW,EAAE/C,MAAM,CAACsC,SAAU;MAAAC,QAAA,EACtClC,QAAQ,CAAC8C,MAAM,GAAG,CAAC,GAClB9C,QAAQ,CAAC+C,GAAG,CAAEjB,OAAO,iBACnBjC,OAAA,CAACJ,WAAW;QACVgC,EAAE,EAAEK,OAAO,CAACC,GAAI;QAChBiB,IAAI,EAAElB,OAAO,CAACkB,IAAK;QACnBlB,OAAO,EAAEA,OAAO,CAAC9B,QAAS;QAC1BiD,QAAQ,EAAEnB,OAAO,CAACmB,QAAQ,IAAI,eAAgB;QAE9CC,YAAY,EAAE1B;MAAc,GADvBM,OAAO,CAACC,GAAG;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEjB,CACF,CAAC,GAEF,CAACrC,aAAa,gBAAGL,OAAA,CAACN,OAAO;QAAA6C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAAG1C,OAAA;QAAAqC,QAAA,EAAG;MAA4B;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAClE;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEV;AAACxC,EAAA,CA/EQD,QAAQ;AAAAqD,EAAA,GAARrD,QAAQ;AAiFjB,eAAeA,QAAQ;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}